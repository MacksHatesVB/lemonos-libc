#pragma once

#include <stdint.h>

enum {
	CMOS_RTC_SECONDS = 0,
	CMOS_RTC_SECOND_ALARM,
	CMOS_RTC_MINUTES,
	CMOS_RTC_MINUTE_ALARM,
	CMOS_RTC_HOURS,
	CMOS_RTC_HOUR_ALARM,
	CMOS_RTC_DAY,
	CMOS_RTC_WEEK,
	CMOS_RTC_MONTH,
	CMOS_RTC_YEAR,
	CMOS_STAT_A,
	CMOS_STAT_B,
	CMOS_STAT_C,
	CMOS_STAT_D,
	CMOS_DIAGNOSTIC,
	CMOS_SHUTDOWN_STATUS,
	CMOS_FLOPPY,
	CMOS_HDA,
	CMOS_EQUIPMENT = 0x14,
	CMOS_CENTURY = 0x32, // every other register is seemingly bios specific
	CMOS_SERIAL = 0x40, // 0x40 - 0x47
	CMOS_CTRL_A = 0x4a,
	CMOS_CTRL_B = 0x4b,
};

// i think this is right
enum {
	CMOS_STAT_A_UPDATING  =  0b10000000,
	CMOS_STAT_A_DIVISOR   =  0b01100000,
	CMOS_STAT_A_BANK      =  0b00010000,
	CMOS_STAT_A_FREQUENCY =  0b00001111,

	CMOS_STAT_B_SET_CLOCK        =  0b10000000,
	CMOS_STAT_B_PERIODIC_IRQ     =  0b01000000,
	CMOS_STAT_B_ALARM_IRQ        =  0b00100000,
	CMOS_STAT_B_CLOCK_IRQ        =  0b00010000,
	CMOS_STAT_B_SQUARE_WAVE      =  0b00001000,
	CMOS_STAT_B_BINARY           =  0b00000100,
	CMOS_STAT_B_EUROPEAN         =  0b00000010,
	CMOS_STAT_B_DAYLIGHT_SAVINGS =  0b00000001,

	CMOS_STAT_C_IRQ_PENDING =  0b10000000,
	CMOS_STAT_C_PERIODIC    =  0b01000000, // have these occured?
	CMOS_STAT_C_ALARM       =  0b00100000,
	CMOS_STAT_C_CLOCK       =  0b00010000,

	CMOS_STAT_D_HAS_RAM     = 0b10000000,

	CMOS_CTRL_A_BATTERY     = 0b10000000,
	CMOS_CTRL_A_UPDATING    = 0b01000000,
	CMOS_CTRL_A_POWER       = 0b00001000,
	CMOS_CTRL_A_TAMPERED    = 0b00000100,
	CMOS_CTRL_A_AWOKEN      = 0b00000010,
	CMOS_CTRL_A_KICKSTARTED = 0b00000001,

	CMOS_CTRL_B_EXTERNAL_BAT = 0b10000000,
	CMOS_CTRL_B_WIPE         = 0b00010000,
	CMOS_CTRL_B_TAMPER_IRQ   = 0b00000100,
	CMOS_CTRL_B_WAKEUP_IRQ   = 0b00000010,
	CMOS_CTRL_B_KICKSTART    = 0b00000001,

};

enum {
	CMOS_PORT_ADDR = 0x70,
	CMOS_PORT_DATA = 0x71,
};

int cmos_updating();
uint8_t cmos_read_register(uint16_t reg);
void cmos_write_register(uint16_t reg, uint8_t value);
